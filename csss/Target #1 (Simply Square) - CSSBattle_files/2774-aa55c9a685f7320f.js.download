(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2774],{1942:function(e,t,a){"use strict";a.d(t,{N:function(){return r}});var n=a(2322);function r(){return(0,n.jsxs)("div",{className:"friends-empty",children:[(0,n.jsx)("img",{alt:"Two chibi friends clashing their swords",src:"/images/friends.png"}),(0,n.jsx)("p",{className:"friends-empty__title",children:"Add friends!"}),(0,n.jsx)("p",{className:"friends-empty__desc",children:"Want to see where you stand only among your friends? Visit their profile and add them as friends to see them here!"})]})}},94:function(e,t,a){"use strict";a.d(t,{g:function(){return s}});var n=a(2322),r=a(4987),i=a(3290);function s(e){var t=e.isFriendsMode,a=e.onChange,s=e.fullWidth,o=void 0===s||s;return(0,n.jsx)(r.s,{options:[{label:"Everyone",value:"everyone"},{label:"Friends Only",value:"friends"}],onChange:function(e){a(e),(0,i.q)({name:"friendLeaderboardToggle",label:"friends"===e.target.value})},value:t?"friends":"everyone",fullWidth:o})}},8432:function(e,t,a){"use strict";var n=a(2322),r=a(8724),i=a(4030);t.Z=function(e){var t=e.alignMenuRight,a=e.isCSSLeaderboard,s=e.setIsCSSLeaderboard,o=e.levelId,l=e.battleId,c=e.small,d=void 0===c||c;return(0,i.isNonCssAvailable)({levelId:o,battleId:l})?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.L,{alignRight:t,dropdownBtnClasses:"".concat(d?"dropdown-btn--small":"","  dropdown-btn--leaderboard-switch ").concat(a?"":"dropdown-btn--primary"),dropdownMenuClasses:"dropdown-menu--no-padding dropdown-menu--small",dropdownBtnContent:a?"CSS":"ALL",children:(0,n.jsxs)("div",{style:{minWidth:"22rem"},children:[(0,n.jsxs)("div",{className:"dropdown-selector",onClick:function(){return s(!0)},children:[(0,n.jsx)("span",{className:"small-pill",style:{marginBottom:"0.5rem"},children:"CSS"}),(0,n.jsx)("p",{children:"Leaderboard only includes pure CSS solutions. Great for beginners"})]}),(0,n.jsxs)("div",{className:"dropdown-selector",onClick:function(){return s(!1)},children:[(0,n.jsx)("span",{className:"small-pill small-pill--primary",style:{marginBottom:"0.5rem"},children:"ALL"}),(0,n.jsx)("p",{children:"Leaderboard includes all solutions (SVG-in-CSS, Unicode, and CSS). Great for advanced players"})]})]})})}):null}},8431:function(e,t,a){"use strict";a.d(t,{x:function(){return u}});var n=a(2322),r=a(9604),i=a(5598),s=a(3196),o=a.n(s),l=a(7841),c=a(8329),d=a(3125),u=function(e){var t=e.icon,a=e.showProBadge,s=e.title,u=e.subtitle;return(0,n.jsx)(d.E.div,{className:o().innerPageHeader,initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)(i.VStack,{children:[t?(0,n.jsx)(r.J,{size:"32",marginRight:"0",name:t,color:"var(--clr-brand)"}):null,a?(0,n.jsx)(c.Z,{height:"24"}):null,(0,n.jsx)(l.x,{size:4,weight:"600",mono:!1,tag:"h1",appearance:"primary",children:s}),(0,n.jsx)("div",{style:{maxWidth:"72ch"},children:(0,n.jsx)(l.x,{size:1,weight:"500",mono:!1,tag:"p",letterSpacing:"0.3px",appearance:"secondary",lineHeight:"1.5",align:"center",children:u})})]})})}},4441:function(e,t,a){"use strict";a.d(t,{s:function(){return F}});var n=a(865),r=a(6670),i=a(6383),s=a(930),o=a(2322),l=a(2784),c=a(5632),d=a(7037),u=a(9241),m=a(1251),f=a(2367),p=a(3552),h=a(9318),v=a(94),y=a(1942),x=a(7500),b=a(8688),g=a.n(b),_=a(5598),j=a(7414),C=a(8432),S=a(9411),P=a(4891),k=a.n(P),I=function(e){var t=e.large,a=e.rank,n=e.index;return(0,o.jsxs)("div",{className:"".concat(k().cuboid," ").concat(t?k().cuboidLarge:""),"data-rank":a,"data-index":n,children:[(0,o.jsx)("div",{className:"".concat(k().face," ").concat(k().ft),children:(0,o.jsx)("span",{children:a})}),(0,o.jsx)("div",{className:"".concat(k().face," ").concat(k().bk)}),(0,o.jsx)("div",{className:"".concat(k().face," ").concat(k().rt)}),(0,o.jsx)("div",{className:"".concat(k().face," ").concat(k().lt)}),(0,o.jsx)("div",{className:"".concat(k().face," ").concat(k().bm)}),(0,o.jsx)("div",{className:"".concat(k().face," ").concat(k().tp)})]})},w=function(e){var t=e.children;return(0,o.jsx)("div",{className:k().scene3d,children:t})},L=a(4987),N=a(9604),T=a(8724),E=a(3125),R=a(5239),D="global",z="streak",B="battle",M="target";function U(e){return(null===e||void 0===e?void 0:e.length)>5}var F=function(){var e=function(e){var t;if(V(null),q(null),(t=e.target.value).match(/target/)){var n=t.split("/")[1];q(n)}else if(t.match(/battle/)){var r=t.split("/")[1];V(r)}Q([]),F(t),a.push("/leaderboard/".concat(t))},t=function(e){if(e===D)return"All time";if(e.match("battle")){if((0,x.checkIfCustomBattle)({id:H}))return"";H=parseInt(H,10);var t=x.battles.filter((function(e){return e.id===H}))[0];return"Battle #".concat(H," - ").concat(t.name)}if(e.match("target")){if(U(W))return"";var a=parseInt(W,10),n=g().filter((function(e){return e.id===a}))[0];return"Target #".concat(W," - ").concat(n.name)}},a=(0,c.useRouter)(),b=(0,l.useContext)(p.S),P=100,k=(0,j.P)(),I=(0,l.useState)(""),N=I[0],F=I[1],A=(0,l.useState)(),W=A[0],q=A[1],Z=(0,l.useState)(),H=Z[0],V=Z[1];(0,l.useEffect)((function(){if(a.isReady){var e=a.query,t=e.type,n=e.id;t===B?(F("battle/".concat(n)),V(n)):t===M?(F("target/".concat(n)),q(n)):F(t===z?"streak":D)}}),[a.isReady]);var Y=(0,l.useState)(),$=(Y[0],Y[1]);(0,l.useEffect)((function(){(0,d.pc)().then($)}),[]);var G=(0,l.useState)([]),J=G[0],Q=G[1],K=(0,l.useState)(),X=K[0],ee=K[1],te=(0,l.useState)({}),ae=te[0],ne=te[1],re=(0,i.Z)((0,h._)("showFriendsLeaderboard",!!b),2),ie=re[0],se=re[1],oe=(0,i.Z)((0,S.L)({levelId:W,battleId:H}),2),le=oe[0],ce=oe[1],de=((0,l.useRef)(),(0,l.useRef)(),(0,l.useState)(3)),ue=de[0],me=de[1];return(0,l.useEffect)((function(){(window.localStorage.debug,N)&&(ee(!0),ne({}),Q([]),me(3),function(){if(N===D)return ie?(0,d.uf)({userId:b.uid}):(0,d.bQ)(P);if(N.match("battle")){var e=H;return(0,x.checkIfCustomBattle)({id:H})||(e=parseInt(H,10)),ie?(0,d.eL)({userId:b.uid,battleId:e,numberOfPlayers:P,isCSSLeaderboard:le}):(0,d.uL)({battleId:e,numberOfPlayers:P,isCSSLeaderboard:le})}if(N.match("target")){var t=W;return U(W)||(t=parseInt(W,10)),ie?(0,d.UZ)({userId:b.uid,levelId:t,numberOfPlayers:P,isCSSLeaderboard:le}):(0,d.R6)({levelId:t,numberOfPlayers:P,isCSSLeaderboard:le})}return N===z?(0,d.Pu)():void 0}().then((function(e){e=e.filter((function(e){return e.playerProfile})),le||N===D||e.map((function(e){var t,a,n;e.score=null===(t=e.overall)||void 0===t?void 0:t.score,e.codeSize=null===(a=e.overall)||void 0===a?void 0:a.codeSize,e.lastUpdated=null===(n=e.overall)||void 0===n?void 0:n.lastUpdated})),N===z&&(e.map((function(e){e.score="".concat(e.streak.count," days")})),me((0,f.Ti)(e))),Q(e),ee(!1),b&&e.length&&(e.find((function(e){return e.playerProfile.id===b.uid}))?(ne({rank:e.findIndex((function(e){return e.playerProfile.id===b.uid}))+1}),(0,f.lC)(2)):N.match("target")||N===z||(0,d.r8)({userId:b.uid,battleId:"battle"===a.query.type?a.query.id:void 0,levelId:"target"===a.query.type?a.query.id:void 0}).then((function(t){ne(t),Q((0,s.Z)(e).concat([{score:t.score,playerProfile:(0,r.Z)((0,n.Z)({},b),{avatar:b.photoURL}),id:b.uid,rank:t.rank,playedCount:t.playedCount}]))})).catch((function(e){console.log("failed to fetch rank")})))})))}),[b?b.uid:"",ie,N,le]),(0,o.jsxs)(_.VStack,{children:[(0,o.jsx)("div",{style:{flexShrink:0},children:(0,o.jsxs)(_.VStack,{gap:"1rem",children:[N?(0,o.jsx)(E.E.div,{initial:{y:-10,opacity:0},exit:{y:-10,opacity:0},animate:{y:0,opacity:1,transition:{delay:.1}},children:(0,o.jsx)(L.s,{primary:!0,value:N,onChange:e,options:[{label:"All-time",value:D},{label:"Streak",value:z}],customOptions:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(L.O,{defaultChecked:N.match(B),selected:N.match(B),primary:!0,children:(0,o.jsx)(T.L,{dropdownBtnClasses:"dropdown-btn--minimal",dropdownMenuClasses:"dropdown-menu--scrollable",dropdownBtnContent:N.match(B)?t(B):"Battle",children:x.battles.slice().reverse().map((function(t){return(0,o.jsxs)("button",{tabIndex:1,className:"dropdown-menu__item",onClick:function(){e({target:{value:"battle/".concat(t.id)}})},children:[(0,o.jsx)(m.bN,{id:t.id})," - ",t.name]},t.id)}))})},B),(0,o.jsx)(L.O,{defaultChecked:N.match(M),selected:N.match(M),primary:!0,children:(0,o.jsx)(T.L,{dropdownBtnClasses:"dropdown-btn--minimal",dropdownMenuClasses:"dropdown-menu--scrollable",dropdownBtnContent:N.match(M)?t(M):"Target",children:g().slice().reverse().map((function(t){return(0,o.jsxs)("button",{tabIndex:1,className:"dropdown-menu__item",onClick:function(){e({target:{value:"target/".concat(t.id)}})},children:[(0,o.jsx)(m.bN,{id:t.id})," - ",t.name]},t.id)}))})},M)]})})}):null,(0,o.jsxs)(_.HStack,{gap:"0.25rem",children:[b&&k&&(0,o.jsx)(E.E.div,{layout:!0,initial:{y:-10,opacity:0},exit:{y:-10,opacity:0},animate:{y:0,opacity:1,transition:{delay:.3}},children:(0,o.jsx)(v.g,{isFriendsMode:ie,onChange:function(e){se("friends"===e.target.value)},fullWidth:!1})}),W||H?(0,o.jsx)(E.E.div,{layout:!0,initial:{y:-10,opacity:0},exit:{y:-10,opacity:0},animate:{y:0,opacity:1,transition:{delay:.5}},children:(0,o.jsx)(C.Z,{alignMenuRight:!0,isCSSLeaderboard:le,setIsCSSLeaderboard:ce,small:!1,levelId:!W||U(W)?W:parseInt(W,10),battleId:!H||(0,x.checkIfCustomBattle)({id:H})?H:parseInt(H,10)})}):null]})]})}),(0,o.jsxs)("div",{children:[X?(0,o.jsx)(E.E.div,{className:"ta-c",initial:{opacity:0},animate:{opacity:1,transition:{delay:.3}},children:(0,o.jsx)(u.R,{children:"Loading up some awesome players..."})}):null,ie&&!X&&!J.length&&(0,o.jsx)(y.N,{}),(0,o.jsx)(R.M,{children:!!ue&&!!(null===J||void 0===J?void 0:J.length)&&(0,o.jsx)(E.E.div,{className:"leaderboard-leaders",initial:{y:-40,opacity:0},exit:{y:-10,opacity:0},animate:{y:0,opacity:1,transition:{type:"spring"}},children:(0,o.jsx)(w,{children:J.slice(0,ue).map((function(e,t){return(0,o.jsx)(O,{data:e,index:t},t)}))})})}),"streak"!==N&&0===ae.rank&&(0,o.jsxs)("p",{className:"section-helper section-helper--no-score",children:["Play at least ","global"===N?2:1," targets to see your rank."]}),(0,o.jsx)(_.HStack,{justify:"center",children:(0,o.jsx)("table",{className:"leaderboard-table",style:{position:"relative",zIndex:1},children:(0,o.jsx)("tbody",{children:J.slice(ue).map((function(e,t){return(0,o.jsxs)("tr",{className:"leaderboar__user  leaderboard__user--".concat(e.rank),children:[(0,o.jsx)("td",{"data-column":"Player Details",children:(0,o.jsxs)(_.HStack,{align:"center",children:[(0,o.jsx)(m.qE,{small:!0,size:"32",url:e.playerProfile.avatar,username:e.playerProfile.username,isPro:e.playerProfile.isPro,userId:e.playerProfile.id,className:"leaderboard__user-avatar"}),(0,o.jsx)(m.Rj,{name:e.playerProfile.displayName,username:e.playerProfile.username,userId:e.playerProfile.id,className:"leaderboard__user-name",ellipsis:!0})]})}),"streak"==N?(0,o.jsx)("td",{"data-column":"Streaks",children:e.score}):(0,o.jsx)("td",{"data-column":"Score",children:e.score.toFixed(2)}),"streak"!==N?(0,o.jsxs)("td",{"data-column":"Meta",children:[e.playedCount?"(".concat(e.playedCount," Target").concat(e.playedCount>1?"s":"",")"):"",e.codeSize?"{".concat(e.codeSize,"}"):""]}):null,(0,o.jsx)("td",{"data-column":"Rank",children:(0,f.x4)(e.rank||t+4,2)})]},t)}))})})})]})]})},O=function(e){var t,a=e.data,n=e.index;return(0,o.jsxs)("div",{className:"leader leader-3d",children:[(0,o.jsx)("div",{className:"leader__info",children:(0,o.jsx)("div",{className:"leader__info__".concat(n+1),children:(0,o.jsxs)(_.VStack,{gap:"1rem",children:[(0,o.jsx)(N.J,{name:"crown",size:"1em",color:["var(--clr-gold-crown)","var(--clr-silver-crown)","var(--clr-bronze-crown)"][n],marginRight:"0"}),(0,o.jsx)("div",{className:"leader-avatar  leader-avatar__".concat(n+1),children:(0,o.jsx)(m.qE,{size:"50",url:a.playerProfile.avatar,username:a.playerProfile.username,userId:a.playerProfile.id,isPro:a.playerProfile.isPro,className:"leader__avatar"})}),(0,o.jsxs)(_.VStack,{gap:"0.3rem",children:[(0,o.jsx)("div",{className:"leader__name",children:(0,o.jsx)(m.Rj,{name:a.playerProfile.displayName,username:a.playerProfile.username,userId:a.playerProfile.id,className:""})}),(0,o.jsxs)("p",{className:"leader__score",children:[(null===(t=a.score)||void 0===t?void 0:t.toFixed)?a.score.toFixed(2):a.score," "]}),a.codeSize?(0,o.jsx)("p",{children:(0,o.jsxs)("span",{className:"leader__meta",children:[a.playedCount?"(".concat(a.playedCount," Target").concat(a.playedCount>1?"s":"",")"):"",a.codeSize?"{".concat(a.codeSize,"}"):""]})}):null]})]})})}),(0,o.jsx)(I,{large:n+1===1,rank:a.rank||n+1,index:n+1})]})}},4987:function(e,t,a){"use strict";a.d(t,{O:function(){return l},s:function(){return c}});var n=a(2322),r=a(3125),i=a(2784),s=a(9721),o=a.n(s),l=function(e){var t=e.onChange,a=e.defaultChecked,i=e.selected,s=e.value,l=e.primary,c=e.highlightId,d=e.children;return(0,n.jsxs)("label",{className:"".concat(o().radioTabBtn," ").concat(l&&o().radioTabBtnPrimary),children:[(0,n.jsx)("input",{type:"radio",name:"tab",value:s,defaultChecked:a,onChange:t}),i?(0,n.jsx)(r.E.div,{layoutId:c,className:"".concat(o().activeIndicator," ").concat(l&&o().activeIndicatorPrimary)}):null,(0,n.jsx)("div",{style:{position:"relative",color:i?"var(--clr-link)":"var(--clr-text)",transition:"0.3s ease"},children:d})]})},c=function(e){var t=e.options,a=e.customOptions,r=e.onChange,s=e.value,c=e.fullWidth,d=void 0!==c&&c,u=e.primary,m=void 0!==u&&u,f=e.classes,p=void 0===f?"":f,h=(0,i.useId)();return(0,n.jsxs)("div",{className:"".concat(o().radioTabs," ").concat(d&&o().radioTabsFullWidth," ").concat(m&&o().radioTabsPrimary," ").concat(p),children:[t.map((function(e,t){return(0,n.jsx)(l,{onChange:r,value:e.value,selected:s===e.value,primary:m,highlightId:h,children:e.label},e.value)})),a]})}},9411:function(e,t,a){"use strict";a.d(t,{L:function(){return s}});var n=a(6383),r=a(4030),i=a(9318);function s(e){var t=e.levelId,a=e.battleId,s=(0,n.Z)((0,i._)("showCSSLeaderboard",!0),2),o=s[0],l=s[1];return(0,r.isNonCssAvailable)({levelId:t,battleId:a})?[o,l]:[!0,function(){}]}},3196:function(e){e.exports={innerPageHeader:"InnerPageHeader_innerPageHeader__HSMOC"}},4891:function(e){e.exports={scene3d:"LeaderboardPodium_scene3d__sG58k",cuboid:"LeaderboardPodium_cuboid__qJQk7",cuboidLarge:"LeaderboardPodium_cuboidLarge__Q8CJE",face:"LeaderboardPodium_face__oto6T",ft:"LeaderboardPodium_ft__jiOdc",bk:"LeaderboardPodium_bk__hlkTr",rt:"LeaderboardPodium_rt__OQK5b",lt:"LeaderboardPodium_lt__tj4WS",tp:"LeaderboardPodium_tp__9IFLM",bm:"LeaderboardPodium_bm__yNrza"}},9721:function(e){e.exports={radioTabs:"RadioTabs_radioTabs__d9zDK",radioTabsFullWidth:"RadioTabs_radioTabsFullWidth__oq2fN",radioTabsPrimary:"RadioTabs_radioTabsPrimary__igl35",radioTabBtn:"RadioTabs_radioTabBtn__aLbrp",radioTabBtnPrimary:"RadioTabs_radioTabBtnPrimary__Nyq78",activeIndicator:"RadioTabs_activeIndicator___CbYq",activeIndicatorPrimary:"RadioTabs_activeIndicatorPrimary__8jTez"}},4030:function(e){function t(e){return"string"===typeof e?new Date(e):e.toDate?e.toDate():new Date(1e3*(e.seconds||e._seconds))}function a(e,t){try{return e.toLocaleString("en-US",{timeZone:t})}catch(a){return e.toLocaleString("en-US",{timeZone:"America/New_York"})}}e.exports={isNonCssAvailable:function({levelId:e,battleId:t}){return e?e>=141:t?t>22:void 0},NON_CSS_START_LEVEL_ID:141,normalizeDate:t,isSameDate:function(e,t,n){if(!e||!t)return!1;const r=new Date(a(e.toDate?e.toDate():e,n)),i=new Date(a(t.toDate?t.toDate():t,n));return r.getDate()===i.getDate()&&r.getMonth()===i.getMonth()&&r.getFullYear()===i.getFullYear()},isTodaysDailyTarget:function(e){if(!e.startDate)return!1;const t=e.startDate.toDate(),a=new Date;return t.getUTCDate()===a.getUTCDate()&&t.getUTCMonth()===a.getUTCMonth()&&t.getUTCFullYear()===a.getUTCFullYear()},isYesterdaysDailyTarget:function(e){if(!e.startDate)return!1;const t=e.startDate.toDate(),a=new Date;return a.setDate(a.getDate()-1),t.getUTCDate()===a.getUTCDate()&&t.getUTCMonth()===a.getUTCMonth()&&t.getUTCFullYear()===a.getUTCFullYear()},getTomorrowDate:function(){var e=new Date;return e.setUTCHours(24,0,0,0),t(e)},getLocaleDate:a}},5239:function(e,t,a){"use strict";a.d(t,{M:function(){return v}});var n=a(2784),r=a(1816),i=a(3617);function s(){const e=(0,n.useRef)(!1);return(0,i.L)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}var o=a(7967),l=a(3105);class c extends n.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d({children:e,isPresent:t}){const a=(0,n.useId)(),r=(0,n.useRef)(null),i=(0,n.useRef)({width:0,height:0,top:0,left:0});return(0,n.useInsertionEffect)((()=>{const{width:e,height:n,top:s,left:o}=i.current;if(t||!r.current||!e||!n)return;r.current.dataset.motionPopId=a;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${a}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${n}px !important;\n            top: ${s}px !important;\n            left: ${o}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}}),[t]),n.createElement(c,{isPresent:t,childRef:r,sizeRef:i},n.cloneElement(e,{ref:r}))}const u=({children:e,initial:t,isPresent:a,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:c})=>{const u=(0,l.h)(m),f=(0,n.useId)(),p=(0,n.useMemo)((()=>({id:f,initial:t,isPresent:a,custom:i,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;r&&r()},register:e=>(u.set(e,!1),()=>u.delete(e))})),s?void 0:[a]);return(0,n.useMemo)((()=>{u.forEach(((e,t)=>u.set(t,!1)))}),[a]),n.useEffect((()=>{!a&&!u.size&&r&&r()}),[a]),"popLayout"===c&&(e=n.createElement(d,{isPresent:a},e)),n.createElement(o.O.Provider,{value:p},e)};function m(){return new Map}var f=a(3422);var p=a(7035);const h=e=>e.key||"";const v=({children:e,custom:t,initial:a=!0,onExitComplete:o,exitBeforeEnter:l,presenceAffectsLayout:c=!0,mode:d="sync"})=>{(0,p.k)(!l,"Replace exitBeforeEnter with mode='wait'");const m=(0,n.useContext)(f.p).forceRender||function(){const e=s(),[t,a]=(0,n.useState)(0),i=(0,n.useCallback)((()=>{e.current&&a(t+1)}),[t]);return[(0,n.useCallback)((()=>r.Wi.postRender(i)),[i]),t]}()[0],v=s(),y=function(e){const t=[];return n.Children.forEach(e,(e=>{(0,n.isValidElement)(e)&&t.push(e)})),t}(e);let x=y;const b=(0,n.useRef)(new Map).current,g=(0,n.useRef)(x),_=(0,n.useRef)(new Map).current,j=(0,n.useRef)(!0);var C;if((0,i.L)((()=>{j.current=!1,function(e,t){e.forEach((e=>{const a=h(e);t.set(a,e)}))}(y,_),g.current=x})),C=()=>{j.current=!0,_.clear(),b.clear()},(0,n.useEffect)((()=>()=>C()),[]),j.current)return n.createElement(n.Fragment,null,x.map((e=>n.createElement(u,{key:h(e),isPresent:!0,initial:!!a&&void 0,presenceAffectsLayout:c,mode:d},e))));x=[...x];const S=g.current.map(h),P=y.map(h),k=S.length;for(let n=0;n<k;n++){const e=S[n];-1!==P.indexOf(e)||b.has(e)||b.set(e,void 0)}return"wait"===d&&b.size&&(x=[]),b.forEach(((e,a)=>{if(-1!==P.indexOf(a))return;const r=_.get(a);if(!r)return;const i=S.indexOf(a);let s=e;if(!s){const e=()=>{_.delete(a),b.delete(a);const e=g.current.findIndex((e=>e.key===a));if(g.current.splice(e,1),!b.size){if(g.current=y,!1===v.current)return;m(),o&&o()}};s=n.createElement(u,{key:h(r),isPresent:!1,onExitComplete:e,custom:t,presenceAffectsLayout:c,mode:d},r),b.set(a,s)}x.splice(i,0,s)})),x=x.map((e=>{const t=e.key;return b.has(t)?e:n.createElement(u,{key:h(e),isPresent:!0,presenceAffectsLayout:c,mode:d},e)})),n.createElement(n.Fragment,null,b.size?x:x.map((e=>(0,n.cloneElement)(e))))}}}]);
//# sourceMappingURL=2774-aa55c9a685f7320f.js.map