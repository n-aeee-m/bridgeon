(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4853],{3806:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/battles",function(){return n(851)}])},3595:function(e,t,n){"use strict";n.d(t,{y:function(){return h}});var a=n(6383),r=n(2322),i=n(2784),s=n(9097),l=n.n(s),c=n(7037),o=n(3552),u=n(9318),d=n(9955),h=function(e){var t=e.numOfPlayersToShow,n=void 0===t?10:t,s=(0,i.useContext)(o.S),h=(0,i.useState)([]),f=h[0],g=h[1],x=(0,i.useState)({}),p=x[0],m=x[1],j=(0,i.useState)(),S=j[0],y=j[1],v=(0,a.Z)((0,u._)("showFriendsLeaderboard",!!s),2),D=v[0],b=v[1],w=(0,i.useState)({playerCount:0}),C=(w[0],w[1]);return(0,i.useEffect)((function(){(0,c.pc)().then(C)}),[]),(0,i.useEffect)((function(){y(!0),(D&&s?(0,c.uf)({userId:s.uid}):(0,c.bQ)(n)).then((function(e){if(g(e),y(!1),e.length||m({}),s&&e.length)if(e.find((function(e){return e.id===s.uid}))){var t=e.find((function(e){return e.id===s.uid}));m({rank:e.findIndex((function(e){return e.id===s.uid}))+1,score:t.score,totalPlayers:0})}else(0,c.r8)({userId:s.uid}).then((function(e){m(e)})).catch((function(e){console.log(e)}))}))}),[s?s.uid:"",D]),(0,r.jsx)(d.A,{type:"global",title:"All-time leaders",leaderboard:f,rankData:p,isFetchingLeaderboard:S,isFriendsMode:D,onLeaderboardFriendTypeChange:function(e){b("friends"===e.target.value)},noRankMessage:"You need at least a score of 10000 to see your rank.",footer:(0,r.jsx)(l(),{href:"/leaderboard",children:(0,r.jsx)("a",{className:"button button--full-width",children:"See top 100"})})})}},8431:function(e,t,n){"use strict";n.d(t,{x:function(){return d}});var a=n(2322),r=n(9604),i=n(5598),s=n(3196),l=n.n(s),c=n(7841),o=n(8329),u=n(3125),d=function(e){var t=e.icon,n=e.showProBadge,s=e.title,d=e.subtitle;return(0,a.jsx)(u.E.div,{className:l().innerPageHeader,initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,a.jsxs)(i.VStack,{children:[t?(0,a.jsx)(r.J,{size:"32",marginRight:"0",name:t,color:"var(--clr-brand)"}):null,n?(0,a.jsx)(o.Z,{height:"24"}):null,(0,a.jsx)(c.x,{size:4,weight:"600",mono:!1,tag:"h1",appearance:"primary",children:s}),(0,a.jsx)("div",{style:{maxWidth:"72ch"},children:(0,a.jsx)(c.x,{size:1,weight:"500",mono:!1,tag:"p",letterSpacing:"0.3px",appearance:"secondary",lineHeight:"1.5",align:"center",children:d})})]})})}},9376:function(e,t,n){"use strict";n.d(t,{d:function(){return l}});var a=n(2322),r=n(2784),i=r.useEffect,s=r.useRef,l=function(e){var t=e.children,n=e.opacity,r=s();return i((function(){var e=setInterval((function(){var e=.1*Math.random();r.current.querySelector("feTurbulence").setAttribute("baseFrequency","0 "+e)}),150);return function(){clearInterval(e)}}),[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"tv-glitch",style:{"--opacity":n},children:[(0,a.jsx)("svg",{children:(0,a.jsx)("defs",{children:(0,a.jsxs)("filter",{id:"noise",x:"0%",y:"0%",width:"100%",height:"100%",ref:r,children:[(0,a.jsx)("feTurbulence",{type:"fractalNoise",baseFrequency:"0 0.000001",result:"NOISE",numOctaves:"2"}),(0,a.jsx)("feDisplacementMap",{in:"SourceGraphic",in2:"NOISE",scale:"100",xChannelSelector:"R",yChannelSelector:"R"})]})})}),(0,a.jsx)("img",{className:"tv-glitch__image",src:"/images/tv-glitch.png"}),t]})})}},851:function(e,t,n){"use strict";n.r(t);var a=n(930),r=n(2322),i=n(2784),s=n(7729),l=n.n(s),c=n(5598),o=n(8431),u=n(7500),d=n(518),h=n(3595),f=n(7841),g=(n(5416),n(2367),n(9097)),x=n.n(g),p=n(6972),m=n(2220),j=n(6833);t.default=function(){var e=(0,i.useState)(!1),t=e[0],n=e[1],s=(0,a.Z)(u.battles);s.reverse();var g=s.findIndex((function(e){return(0,u.getBattleStatus)(e)===u.BattleStatuses.FINISHED}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:"Battles | CSSBattle"},"title"),(0,r.jsx)("meta",{property:"og:title",content:"Battles - CSSBattle"},"ogTitle")]}),(0,r.jsx)("div",{style:{maxWidth:"100%"},children:(0,r.jsxs)(c.VStack,{gap:"3rem",children:[(0,r.jsxs)(c.VStack,{gap:"2rem",children:[(0,r.jsx)(o.x,{icon:"battle",title:"Battles",subtitle:"Compete with players around the world in these nail-biting battles"}),(0,r.jsxs)(c.HStack,{gap:"0.75rem",children:[(0,r.jsx)(m.z,{onClick:function(){n(!0)},children:"Host a private battle"}),(0,r.jsx)(x(),{href:"/advertise",children:(0,r.jsx)("a",{className:"button",children:"Advertise in a battle"})}),(0,r.jsx)(x(),{href:"/my-battles",children:(0,r.jsx)("a",{className:"button",children:"My battles"})})]})]}),(0,r.jsx)("div",{style:{width:"100%"},children:(0,r.jsx)(p.E,{})}),(0,r.jsxs)(c.HStack,{align:"flex-start",gap:"3rem",responsive:!0,children:[(0,r.jsxs)(c.VStack,{align:"stretch",gap:"3rem",children:[s.slice(0,g).length?(0,r.jsxs)(c.VStack,{align:"stretch",children:[(0,r.jsx)(f.x,{size:3,weight:"600",mono:!1,appearance:"primary",children:"Play latest battle"}),s.slice(0,g).map((function(e){return(0,r.jsx)(d.d,{battle:e,fullWidth:!0},e.id)}))]}):null,(0,r.jsx)(c.VStack,{gap:"3rem",align:"stretch",children:(0,r.jsxs)(c.VStack,{align:"stretch",children:[(0,r.jsx)(f.x,{size:3,weight:"600",mono:!1,appearance:"primary",children:"Play past battles"}),(0,r.jsx)(c.VStack,{gap:"2rem",align:"stretch",children:s.slice(g).map((function(e){return(0,r.jsx)(d.d,{battle:e},e.id)}))})]})})]}),(0,r.jsx)("div",{style:{minWidth:"18rem",width:"18rem",flex:"0 0 0"},children:(0,r.jsx)(h.y,{})})]})]})}),(0,r.jsx)(j.w,{isOpen:t,onRequestClose:function(){return n(!1)}})]})}},3196:function(e){e.exports={innerPageHeader:"InnerPageHeader_innerPageHeader__HSMOC"}},4030:function(e){function t(e){return"string"===typeof e?new Date(e):e.toDate?e.toDate():new Date(1e3*(e.seconds||e._seconds))}function n(e,t){try{return e.toLocaleString("en-US",{timeZone:t})}catch(n){return e.toLocaleString("en-US",{timeZone:"America/New_York"})}}e.exports={isNonCssAvailable:function({levelId:e,battleId:t}){return e?e>=141:t?t>22:void 0},NON_CSS_START_LEVEL_ID:141,normalizeDate:t,isSameDate:function(e,t,a){if(!e||!t)return!1;const r=new Date(n(e.toDate?e.toDate():e,a)),i=new Date(n(t.toDate?t.toDate():t,a));return r.getDate()===i.getDate()&&r.getMonth()===i.getMonth()&&r.getFullYear()===i.getFullYear()},isTodaysDailyTarget:function(e){if(!e.startDate)return!1;const t=e.startDate.toDate(),n=new Date;return t.getUTCDate()===n.getUTCDate()&&t.getUTCMonth()===n.getUTCMonth()&&t.getUTCFullYear()===n.getUTCFullYear()},isYesterdaysDailyTarget:function(e){if(!e.startDate)return!1;const t=e.startDate.toDate(),n=new Date;return n.setDate(n.getDate()-1),t.getUTCDate()===n.getUTCDate()&&t.getUTCMonth()===n.getUTCMonth()&&t.getUTCFullYear()===n.getUTCFullYear()},getTomorrowDate:function(){var e=new Date;return e.setUTCHours(24,0,0,0),t(e)},getLocaleDate:n}}},function(e){e.O(0,[7059,3882,9955,9774,2888,179],(function(){return t=3806,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=battles-589505af9fd1cd93.js.map